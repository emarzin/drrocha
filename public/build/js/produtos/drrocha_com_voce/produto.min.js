$(document).ready(function() {
    var storage = Storages.localStorage,
        user = storage.get("user");
    $(".firstname").text(user.firstname), $(".btnOpenModulo").click(function() {
        var modulo = $(this).attr("modulo");
        if (console.log(modulo), !$("#btn_" + modulo).is("[disabled=disabled]")) {
            var url = "/produto/drrocha_com_voce/modulo/" + modulo + "/?token=" + storage.get("token");
            console.log(url), window.location.href = url
            console.log('aqui'+window.location.href);
        }
    });
    var produto_keyword = $("#produto_keyword");
    ! function() {
        var access = $.ajax({
            url: "/api/loadaccess",
            type: "GET",
            beforeSend: function(request) {
                request.setRequestHeader("Authorization", storage.get("token"))
            },
            data: {
                keyword: produto_keyword.text()
            }
        });
        access.done(function(data) {
            if (data.mod_progressos)
                for (var i = 0; i < data.mod_progressos.length; i++) "blocked" === data.mod_progressos[i].status ? ($("#btn_" + data.mod_progressos[i].keyword).attr("disabled", !0), $("#img_" + data.mod_progressos[i].keyword).attr("src", "/images/produtos/" + produto_keyword.text() + "/cadeado.png")) : ($("#btn_" + data.mod_progressos[i].keyword).attr("disabled", !1), $("#img_" + data.mod_progressos[i].keyword).attr("src", "/images/produtos/" + produto_keyword.text() + "/modulo1/thumb.png"))
        }), access.fail(function(xhr, textStatus) {
            xhr.responseJSON ? console.log(xhr.responseJSON) : console.log(xhr.responseText)
        })
    }()
});